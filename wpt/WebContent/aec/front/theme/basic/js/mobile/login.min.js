$(document).ready(function() {
	var myReg="^/w*(?)/w*$";
    isWeiXin() || $("#wxlogin").hide(),
    jQuery.validator.addMethod("mobile",
    function(e, r) {
        var n = /^1[3|4|5|7|8]\d{9}$/;
        return this.optional(r) || n.test(e)
    },
    "手机格式不对"),
    $("#member_loginForm").validate({
        rules: {
            username: {
                required: !0,
                mobile: !0
            },
            userPassword: {
                required: !0,
                minlength: 6,
                maxlength: 16
            }
        },
        messages: {
            username: {
                required: "请输入用户名"
            },
            userPassword: {
                required: "请输入密码",
                minlength: "确认密码不能小于6个字符",
                maxlength: "确认密码不能大于16个字符"
            }
        },
        errorPlacement: function(e, r) {
            e.insertAfter(r)
        },
        success: function(e) {
            e.addClass("valid").text("")
        },
        submitHandler: function() {
            $.ajax({
                type: "POST",
                url: "/user/login.json?randID=" + parseInt(1e6 * Math.random()),
                data: {
                    username: $("#member_loginForm input[id=username]").val(),
                    userPassword: $("#member_loginForm input[id=userPassword]").val(),
                    rememberUserName: !0,
                    url: $("#member_loginForm input[id=loginurl]").val()
                },
                dataType: "json",
                success: function(e) {
						return "102008" != e.message.operateCode ? (malert(e.message.message+"",1000), !1) : void("102008" == e.message.operateCode && (e.redirectUrl != undefined ? (UrlDecode(e.redirectUrl).indexOf("?")!=-1?window.location.href = UrlDecode(e.redirectUrl) + "&r="+10000*Math.random():window.location.href = UrlDecode(e.redirectUrl) + "?r="+10000*Math.random()): window.location.href = "/content/user/pcenter.shtml?favPage=1&favRows=10&r="+10000*Math.random()))
                },
                error: function() {
                    return malert("系统繁忙,请稍后再试",1000),
                    !1
                }
            })
        }
    })
});