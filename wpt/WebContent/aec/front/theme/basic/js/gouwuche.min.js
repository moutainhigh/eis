function changevalue(e,n){$.ajax({type:"POST",url:"/cart/update.json",data:{transactionId:n,count:e},dataType:"json",success:function(){$(e).attr("value",e),window.location.reload()},error:function(){return alert("系统繁忙,请稍后再试"),!1}})}function increase(e,n){var t=parseInt($(e).prev().attr("value"))+1;$.ajax({type:"POST",url:"/cart/update.json",data:{transactionId:n,count:t},dataType:"json",success:function(){$(e).prev().attr("value",t),window.location.reload()},error:function(){return alert("系统繁忙,请稍后再试"),!1}})}function decrease(e,n){var t=parseInt($(e).next().attr("value"))-1;$.ajax({type:"POST",url:"/cart/update.json",data:{transactionId:n,count:t},dataType:"json",success:function(){$(e).prev().attr("value",t),setTimeout(function(){window.location.reload()},1e3)},error:function(){return alert("系统繁忙,请稍后再试"),!1}})}function GetCount(){var e=0;$("#rongQi input[name=food]").each(function(){if($(this).prop("checked"))for(var n=0;n<$(this).length;n++)e+=parseFloat($(this).parent().parent().next().next().next().next().find(".sumtotal").text());else $(".quanxuan").removeAttr("checked")}),$("#zong1").html(e.toFixed(2))}function isFoodChecked(){var e=[];$("#rongQi input[name=food]").each(function(){e.push($(this).prop("checked"))});for(var n=0;n<e.length;n++){if(e[n]){isChecked=!0;break}isChecked=!1}}function isQuanquanChecked(){var e=[];$("#rongQi input[name=food]").each(function(){e.push($(this).prop("checked"))});for(var n=0;n<e.length;n++)0==e[n]&&$("#rongQi #quanxuan").prop("checked",!1)}$(function(){isChecked=!1,$("#rongQi input[name=food],#quanxuan").prop("checked",!0),GetCount(),$("#rongQi input[name=food]").click(function(){isFoodChecked(),GetCount(),"编辑"==$(".btn_cancel").text()?isChecked?$(".shanchu2").css("backgroundColor","#ff6400"):$(".shanchu2").css("backgroundColor","#a4a4a4"):"取消"==$(".btn_cancel").text()&&(isChecked?$(".delgwc").css("backgroundColor","#ff6400"):$(".delgwc").css("backgroundColor","#a4a4a4")),isQuanquanChecked()}),$(".quanxuan").click(function(){this.checked?($(":checkbox").prop("checked","checked"),"编辑"==$(".btn_cancel").text()?(GetCount(),$(".shanchu2").css("backgroundColor","#ff6400")):"取消"==$(".btn_cancel").text()&&$(".delgwc").css("backgroundColor","#ff6400")):($("#zong1").html("0.00"),$(":checkbox").removeAttr("checked"),"编辑"==$(".btn_cancel").text()?$(".shanchu2").css("backgroundColor","#a4a4a4"):"取消"==$(".btn_cancel").text()&&(isFoodChecked(),isChecked?$(".delgwc").css("backgroundColor","#ff6400"):$(".delgwc").css("backgroundColor","#a4a4a4")))}),$("#delgwc").click(function(){var e=new Array;return $('input[name="food"]:checked').each(function(n,t){t.checked&&e.push(t.value)}),e.length<1?(alert("请选择!"),!1):void $.ajax({type:"POST",url:"/yxcart/delete.json",data:{id:e},dataType:"json",success:function(){alert("删除成功"),window.location.reload()},error:function(){return alert("系统繁忙,请稍后再试"),!1}})}),$(".btn_cancel").click(function(){"取消"==$(this).text()?($("#rongQi input[name=food],#quanxuan").prop("checked",!0),$(this).text("编辑"),GetCount(),$(".delgwc").hide(),$(".qujiesuan").show()):($("#rongQi input[name=food],#quanxuan").prop("checked",!1),$(this).text("取消"),$(".delgwc").show(),$(".qujiesuan").hide(),$("#zong1").html("0.00"))}),$("#balance").click(function(){var e=new Array;return $('input[name="food"]:checked').each(function(n,t){t.checked&&e.push(t.value)}),e.length<1?(alert("请选择!"),!1):void(location.href="/yxcart/confirmorder/"+e)})});